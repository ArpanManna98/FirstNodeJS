<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title> Login Form </title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <div class="center">
      <h1>Login</h1>
      <form method="post">
        <div class="txt_field">
          <input type="text" required id="usrEmail">
          <span></span>
          <label>Username</label>
          
        </div>
        <div class="txt_field">
          <input type="password" required id="passwd">
          <span></span>
          <label>Password</label>
        </div>
        <div class="pass">Forgot Password?</div>
        <input type="button" value="Login" onclick="checklogin()">
        <div class="signup_link">
          Not a member? <a href="/signuppage">Signup</a> 
          
      </form>
    </div>
    <script>
      function checklogin() {
          console.log("login called");
          let email = document.getElementById("usrEmail").value;
          let password = document.getElementById("passwd").value;
          console.log(email, password);
          fetch("http://localhost:8081/login", {
              method: "post",
              headers: {
                  'Accept': 'application/json',
                  'Content-Type': 'application/json'
              },

              //make sure to serialize your JSON body
              body: JSON.stringify({
                  emailzzz: email,
                  passwordzzz: password
              })
          })
              .then(res => res.json())
              .then((response) => {
                  console.log(response, "tfdft");
                  if(response["loginstatus"]==true){
                    window.location.href="http://localhost:8081/welcome"
                  }
                  //do something awesome that makes the world a better place
              }).catch(err => {
                  console.log(err);
                  // Handle errors 
              });
      }
  </script>


  </body>
</html>
